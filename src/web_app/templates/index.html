<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>èˆ†æƒ…åˆ†æç³»ç»Ÿ - ä¸‰æ˜åŒ»æ”¹</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}" />
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon" />
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f4f4f9;
            color: #333;
            margin: 0;
            padding: 0;
        }

        header {
            background-color: #005f6b;
            color: white;
            padding: 20px 0;
            text-align: center;
            font-size: 2em;
            font-weight: bold;
        }

        header + h2 {
            text-align: center;
            color: #005f6b;
            margin: 10px 0 30px 0;
            font-weight: normal;
        }

        .policy-summary {
            background-color: white;
            max-width: 1200px;
            margin: 0 auto 30px auto;
            padding: 20px 30px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .policy-summary h2 {
            color: #005f6b;
            margin-top: 0;
            font-size: 1.8em;
        }

        .policy-overview {
            font-size: 1em;
            margin-bottom: 10px;
        }

        #policy-details {
            display: none;
            font-size: 0.95em;
            color: #444;
            line-height: 1.5;
            margin-top: 10px;
            border-top: 1px solid #eee;
            padding-top: 15px;
        }

        .btn-expand {
            background-color: #005f6b;
            color: white;
            border: none;
            border-radius: 20px;
            padding: 8px 16px;
            cursor: pointer;
            font-size: 1em;
        }

        .btn-expand:hover {
            background-color: #003d47;
        }

        .wechat-articles {
            max-width: 1200px;
            margin: 0 auto 40px auto;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            padding: 20px 30px;
        }

        .wechat-articles h3 {
            color: #005f6b;
            margin-top: 0;
            margin-bottom: 15px;
        }

        .wechat-articles ul {
            list-style: none;
            padding-left: 0;
        }

        .wechat-articles ul li a {
            color: #005f6b;
            text-decoration: none;
            font-weight: 600;
        }

        .wechat-articles ul li a:hover {
            text-decoration: underline;
        }

        /* ä¸‹é¢ä¿ç•™ä½ åŸæœ‰æ ·å¼ */
        .search-bar {
            width: 80%;
            max-width: 600px;
            margin: 20px auto;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 25px;
            font-size: 1em;
            box-sizing: border-box;
            display: block;
        }

        .keyword-suggestions {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            margin-top: 10px;
            margin-bottom: 30px;
        }

        .keyword-suggestions a {
            padding: 8px 16px;
            border-radius: 25px;
            background-color: #005f6b;
            color: white;
            text-decoration: none;
            font-size: 1em;
        }

        .keyword-suggestions a:hover {
            background-color: #003d47;
        }

        section {
            padding: 30px;
            max-width: 1200px;
            margin: 20px auto;
            background-color: white;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            border-radius: 8px;
        }

        section h2 {
            font-size: 1.8em;
            color: #005f6b;
            margin-bottom: 20px;
        }

        .img-container {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 15px;
        }

        .img-block {
            display: flex;
            flex-direction: column;
            align-items: center;
            flex: 1 1 23%;
            box-sizing: border-box;
        }

        .img-block h3 {
            font-size: 1.2em;
            color: #005f6b;
            margin-bottom: 15px;
            text-align: center;
        }

        img {
            width: 100%;
            height: auto;
            max-height: 300px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        footer {
            background-color: #333;
            color: white;
            text-align: center;
            padding: 20px;
            position: fixed;
            width: 100%;
            bottom: 0;
        }

        .sentiment-img-container {
            display: flex;
            flex-direction: column;
            gap: 30px;
        }

        .sentiment-img-container .img-block {
            flex: 1 1 100%;
            max-width: 100%;
        }

        .sentiment-img-container img {
            width: 100%;
            height: auto;
            max-height: 500px;
            border-radius: 15px;
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }

        @media (max-width: 768px) {
            .img-block {
                flex: 1 1 45%;
            }
            section {
                padding: 15px;
            }
            .img-block h3 {
                font-size: 1em;
            }
            .sentiment-img-container {
                flex-direction: column;
            }
            .sentiment-img-container img {
                max-height: 400px;
            }
        }
    </style>
    <script>
        function togglePolicyDetails() {
            const details = document.getElementById('policy-details');
            const btn = document.getElementById('btn-toggle-details');
            if (details.style.display === 'none' || details.style.display === '') {
                details.style.display = 'block';
                btn.textContent = 'æ”¶èµ·æ”¿ç­–è¯¦æƒ…';
            } else {
                details.style.display = 'none';
                btn.textContent = 'å±•å¼€æ”¿ç­–è¯¦æƒ…';
            }
        }
    </script>
</head>
<body>
    <header>èˆ†æƒ…åˆ†æç³»ç»Ÿ</header>
    <h2>ä»¥â€œä¸‰æ˜åŒ»æ”¹â€ä¸ºä¾‹</h2>

    <!-- æ”¿ç­–è¯´æ˜åŒºåŸŸ -->
    <div class="policy-summary">
        <h2>{{ policy.title }}</h2>
        <p class="policy-overview">{{ policy.overview }}</p>
        <button class="btn-expand" id="btn-toggle-details" onclick="togglePolicyDetails()">å±•å¼€æ”¿ç­–è¯¦æƒ…</button>
        <div id="policy-details">{{ policy.details | safe }}</div>
    </div>

    <!-- ç›¸å…³å…¬ä¼—å·æ–‡ç« æ¨è -->
    <div class="wechat-articles">
        <h3>ç›¸å…³å…¬ä¼—å·æ–‡ç« æ¨è</h3>
        <ul>
            <li><a href="https://weixin.sogou.com/weixin?query=ä¸‰æ˜åŒ»æ”¹" target="_blank" rel="noopener noreferrer">ç‚¹å‡»å‰å¾€å¾®ä¿¡æœç‹—æŸ¥çœ‹â€œä¸‰æ˜åŒ»æ”¹â€ç›¸å…³æ–‡ç« </a></li>
        </ul>
    </div>

    <!-- Search bar -->
    <form action="/search" method="get">
        <input
            type="text"
            name="keyword"
            class="search-bar"
            placeholder="è¯·è¾“å…¥å…³é”®è¯è¿›è¡Œæœç´¢"
            value="{{ request.args.get('keyword', '') }}"
            required
        />
    </form>

    <!-- Keyword Suggestions -->
    <div class="keyword-suggestions">
        {% for keyword in keywords %}
            <a href="{{ url_for('search', keyword=keyword[0]) }}">{{ keyword[0] }}</a>
        {% endfor %}
    </div>

    <!-- Wordcloud Section -->
    <section>
        <h2>ä¸»é¢˜è¯äº‘å›¾</h2>
        <div class="img-container">
            {% for img in wordcloud_images %}
                <div class="img-block">
                    <h3>{{ loop.index }}å·ä¸»é¢˜</h3>
                    <img
                        src="{{ url_for('serve_image', folder='wordcloud', filename=img) }}"
                        alt="è¯äº‘å›¾ {{ img }}"
                    />
                </div>
            {% endfor %}
        </div>
    </section>

    <section>
    <h2>ä¸»é¢˜è¦ç‚¹è§£è¯»</h2>
    <div class="topic-interpretation">
        
        <!-- Topic 1 -->
        <div class="topic-block">
        <div class="topic-image">
            <img src="{{ url_for('serve_image', folder='wordcloud', filename='topic_1_wordcloud.png') }}" alt="ä¸»é¢˜1è¯äº‘" />
        </div>
        <div class="topic-text">
            <h3>ğŸ”¹ ä¸»é¢˜ #1ï¼šåŒ»ç”ŸèŒä¸šå›°å¢ƒä¸è½¬è¡Œæ„æ„¿</h3>
            <p><strong>å…³é”®è¯äº®ç‚¹ï¼š</strong>åŒ»é™¢ã€åŒ»ç”Ÿã€å·¥èµ„ã€è¡Œæ”¿ã€ä¸‰ç”²ã€ä¸´åºŠã€è½¬è¡Œã€æ”¶å…¥ã€å¹´è–ªã€å­¦åŒ»ã€ç§‘ç ”ã€èŒç§°</p>
            <p><strong>æ ¸å¿ƒè§£è¯»ï¼š</strong></p>
            <ul>
            <li>è¯¥ä¸»é¢˜é›†ä¸­ä½“ç°äº†åŒ»ç”Ÿå°¤å…¶æ˜¯å¹´è½»åŒ»åŠ¡äººå‘˜åœ¨å½“å‰ä½“åˆ¶ä¸‹å¯¹æ”¶å…¥ã€èŒä¸šå‘å±•å’Œä¸ªäººå‰é€”çš„å¼ºçƒˆç„¦è™‘ã€‚</li>
            <li>â€œè½¬è¡Œâ€â€œè¯»åšâ€â€œå¹´è–ªâ€ç­‰è¯åæ˜ å‡ºéƒ¨åˆ†åŒ»åŠ¡å·¥ä½œè€…å¯¹å½“å‰å²—ä½äº§ç”Ÿå¤±æœ›ï¼Œè€ƒè™‘è½¬å‹æˆ–æ·±é€ ã€‚</li>
            <li>â€œä¸‰ç”²â€â€œè¡Œæ”¿â€è¯é¢‘è¾ƒé«˜ï¼Œæš—ç¤ºå¯¹å¤§åŒ»é™¢è¡Œæ”¿ç®¡ç†çš„æ‰¹è¯„ä¸åˆ¶åº¦å‹åŠ›ã€‚</li>
            <li>è¡¨æƒ…è¯ï¼ˆå¦‚â€œdogeâ€â€œå“­â€â€œå·ç¬‘â€â€œæ‚è„¸â€ï¼‰æ˜¾ç¤ºå‡ºè°ƒä¾ƒã€æ— å¥ˆçš„æƒ…ç»ªæ°›å›´ã€‚</li>
            </ul>
            <p><strong>æƒ…æ„Ÿå€¾å‘ï¼š</strong>æ¶ˆæä¸ºä¸»ï¼Œå¸¦æœ‰è°ƒä¾ƒä¸æ— åŠ›æ„Ÿã€‚</p>
        </div>
        </div>

        <!-- Topic 2 -->
        <div class="topic-block">
        <div class="topic-image">
            <img src="{{ url_for('serve_image', folder='wordcloud', filename='topic_2_wordcloud.png') }}" alt="ä¸»é¢˜2è¯äº‘" />
        </div>
        <div class="topic-text">
            <h3>ğŸ”¹ ä¸»é¢˜ #2ï¼šè–ªèµ„ä¸å…¬ä¸åŠ³åŠ¨å¼ºåº¦åå·®</h3>
            <p><strong>å…³é”®è¯äº®ç‚¹ï¼š</strong>å“­ã€ç¬‘ã€å·¥èµ„ã€æ²¡ã€å·¥ä½œã€é«˜ã€ä½ã€å¤œç­ã€ç»©æ•ˆã€ç§ç«‹ã€åŒ»æŠ€ã€æ”¹é©</p>
            <p><strong>æ ¸å¿ƒè§£è¯»ï¼š</strong></p>
            <ul>
            <li>â€œå“­â€â€œç¬‘â€â€œæƒ¹â€ç­‰æƒ…ç»ªæ€§è¯é¢‘é«˜ï¼Œè¡¨è¾¾åŒ»åŠ¡äººå‘˜å¯¹â€œé«˜åŠ³åŠ¨ã€ä½æŠ¥é…¬â€ç°çŠ¶çš„å¼ºçƒˆä¸æ»¡ã€‚</li>
            <li>å…³é”®è¯ç»„åˆå¦‚â€œå¤œç­â€â€œå·¥ä½œé‡â€â€œç»©æ•ˆâ€æ­ç¤ºåŸºå±‚ä¸€çº¿åŒ»ç”Ÿçš„è¿‡åŠ³é—®é¢˜ã€‚</li>
            <li>â€œé«˜â€â€œä½â€â€œæ”¶å…¥â€â€œç§ç«‹â€åæ˜ å‡ºå…¬ç§ç«‹åŒ»é™¢ä¹‹é—´çš„æ”¶å…¥å¾…é‡å·®è·é—®é¢˜è¢«å¹¿æ³›è®¨è®ºã€‚</li>
            <li>â€œåŒ»æ”¹â€å‡ºç°åœ¨è´Ÿé¢è¯­å¢ƒä¸­ï¼Œæš—ç¤ºæ”¹é©åœ¨æ”¶å…¥åˆ†é…ä¸Šå¼•å‘äº‰è®®ã€‚</li>
            </ul>
            <p><strong>æƒ…æ„Ÿå€¾å‘ï¼š</strong>æ˜æ˜¾è´Ÿé¢ï¼Œæƒ…ç»ªé›†ä¸­äºæ„¤æ€’ã€å§”å±ˆã€è®½åˆºã€‚</p>
        </div>
        </div>

        <!-- Topic 3 -->
        <div class="topic-block">
        <div class="topic-image">
            <img src="{{ url_for('serve_image', folder='wordcloud', filename='topic_3_wordcloud.png') }}" alt="ä¸»é¢˜3è¯äº‘" />
        </div>
        <div class="topic-text">
            <h3>ğŸ”¹ ä¸»é¢˜ #3ï¼šéº»é†‰ç§‘ä¸ä¸“ä¸šå†·é—¨çš„ç»“æ„æ€§å›°å¢ƒ</h3>
            <p><strong>å…³é”®è¯äº®ç‚¹ï¼š</strong>éº»é†‰ã€åŒ»ç”Ÿã€åŒ»æŠ€ã€ä¸´åºŠã€åŒ»å¸ˆã€ç§‘å®¤ã€é™è–ªã€ç§ç«‹ã€ä¸‰ç”²ã€åŒ»ç–—</p>
            <p><strong>æ ¸å¿ƒè§£è¯»ï¼š</strong></p>
            <ul>
            <li>â€œéº»é†‰â€ä½œä¸ºä¸»é¢˜è¯é¢‘æœ€é«˜çš„å…³é”®è¯ï¼Œæ­ç¤ºè¯¥ç§‘å®¤è¢«å…³æ³¨æˆ–åæ§½é¢‘ç¹ï¼Œæš—å«â€œå†·é—¨ç§‘å®¤è¢«è¾¹ç¼˜åŒ–â€çš„ç°è±¡ã€‚</li>
            <li>åŒ»æŠ€å²—ä½é¢‘ç¹å‡ºç°ï¼Œæ˜¾ç¤ºå‡ºç›¸å…³ä»ä¸šè€…å¯¹å¾…é‡ã€åœ°ä½ã€æ™‹å‡ç­‰æ–¹é¢å­˜åœ¨ä¸æ»¡ã€‚</li>
            <li>â€œä¸ç”¨â€â€œåæ­£â€â€œçœŸçš„â€â€œç®—â€ç­‰å£è¯­è¯æš—ç¤ºåŒ»æŠ¤ç¾¤ä½“çš„æ¶ˆææ€åº¦ä¸è‡ªæˆ‘è°ƒä¾ƒã€‚</li>
            <li>â€œç§ç«‹â€â€œä¸‰ç”²â€â€œå·¥èµ„â€å†æ¬¡å¼•å‡ºå¯¹åŒ»é™¢ä½“ç³»å†…éƒ¨ä¸å¹³è¡¡çš„è®¨è®ºã€‚</li>
            </ul>
            <p><strong>æƒ…æ„Ÿå€¾å‘ï¼š</strong>è®½åˆºä¸­å¤¹æ‚ç–²æƒ«ï¼Œæ•´ä½“åè´Ÿé¢ã€‚</p>
        </div>
        </div>

        <!-- Topic 4 -->
        <div class="topic-block">
        <div class="topic-image">
            <img src="{{ url_for('serve_image', folder='wordcloud', filename='topic_4_wordcloud.png') }}" alt="ä¸»é¢˜4è¯äº‘" />
        </div>
        <div class="topic-text">
            <h3>ğŸ”¹ ä¸»é¢˜ #4ï¼šå¯¹åŒ»æ”¹æˆæ•ˆçš„ç°å®è½å·®ä¸å¤±æœ›</h3>
            <p><strong>å…³é”®è¯äº®ç‚¹ï¼š</strong>åŒ»ç”Ÿã€å¤±æœ›ã€ä¸‰æ˜ã€åŒ»æ”¹ã€å·¥èµ„ã€ç—…äººã€åŒ»ä¿ã€æ»¡æ„åº¦ã€åŒ»ç–—ã€ç–—æ•ˆ</p>
            <p><strong>æ ¸å¿ƒè§£è¯»ï¼š</strong></p>
            <ul>
            <li>æ­¤ä¸»é¢˜ä¸­å‡ºç°å¤§é‡å…³äºâ€œå¤±æœ›â€â€œæ»¡æ„åº¦â€â€œç–—æ•ˆâ€çš„è¯ï¼Œåæ˜ å‡ºå…¬ä¼—å¯¹ä¸‰æ˜åŒ»æ”¹åˆè¡·ä¸å®é™…è½åœ°æ•ˆæœä¹‹é—´çš„è½å·®ã€‚</li>
            <li>åŒ»ç”Ÿè§†è§’è¡¨è¾¾äº†å¯¹æ”¶å…¥ä¸ç¤¾ä¼šå°Šé‡çš„ä¸‹é™çš„ä¸æ»¡ï¼Œæ‚£è€…è§†è§’åˆ™å¯èƒ½å¯¹åŒ»ç–—æœåŠ¡ç»“æœäº§ç”Ÿè´¨ç–‘ã€‚</li>
            <li>â€œåŒ»ä¿â€â€œå¼€è¯â€â€œé—¨è¯Šâ€ç­‰è¯è¯­æ¶‰åŠåŒ»ç–—æˆæœ¬æ§åˆ¶ã€ç”¨è¯è§„èŒƒç­‰æ”¿ç­–å½±å“ã€‚</li>
            <li>â€œçŸ³åŒ–â€â€œå·ç¬‘â€æš—å«è°ƒä¾ƒä¸éœ‡æƒŠçš„æƒ…ç»ªã€‚</li>
            </ul>
            <p><strong>æƒ…æ„Ÿå€¾å‘ï¼š</strong>æ‰¹åˆ¤æ€§è¾ƒå¼ºï¼Œè´Ÿé¢ä¸ºä¸»ï¼Œæºæ‚æ— å¥ˆä¸å¤±æœ›ã€‚</p>
        </div>
        </div>

    </div>
    </section>



    <!-- Sentiment Analysis Section -->
    <section>
        <h2>æƒ…æ„Ÿåˆ†æå›¾</h2>
        <div class="sentiment-img-container">
            {% for img in sentiment_images %}
                <div class="img-block">
                    <img
                        src="{{ url_for('serve_image', folder='sentiment_analysis', filename=img) }}"
                        alt="æƒ…æ„Ÿå›¾ {{ img }}"
                    />
                </div>
            {% endfor %}
        </div>
    </section>

    <!-- Search Results Section -->
    {% if search_results %}
        <section>
            <h2>æœç´¢ç»“æœ</h2>
            <h3>ä¸å…³é”®è¯ "{{ keyword }}" ç›¸å…³çš„è¯„è®ºï¼š</h3>
            <ul>
                {% for result in search_results %}
                    <li>
                        <p><strong>è¯„è®ºå†…å®¹ï¼š</strong>{{ result.text }}</p>
                        <p><strong>æƒ…æ„Ÿæ ‡ç­¾ï¼š</strong>{{ result.sentiment_label }}</p>
                    </li>
                {% endfor %}
            </ul>

            <h3>ç›¸åŒä¸»é¢˜çš„å…¶ä»–è¯„è®ºï¼š</h3>
            <ul>
                {% for topic_comment in same_topic_comments %}
                    <li>
                        <p><strong>è¯„è®ºå†…å®¹ï¼š</strong>{{ topic_comment.text }}</p>
                        <p><strong>æƒ…æ„Ÿæ ‡ç­¾ï¼š</strong>{{ topic_comment.sentiment_label }}</p>
                    </li>
                {% endfor %}
            </ul>
        </section>
    {% endif %}

    <footer>Â© 2025 ä¸‰æ˜åŒ»æ”¹èˆ†æƒ…åˆ†æ</footer>
</body>
</html>
